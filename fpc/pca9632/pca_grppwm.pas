unit pca_grppwm;

{$mode objfpc}{$H+}

interface

uses pca_display;

function initialize_gwm () : GWM;
function initialize_dimming () : DIMM;
function initialize_freq (): FREQ;

Implementation

function initialize_gwm () : GWM;
var
  i: integer;
  percs: array [1..65] of Real = (0,1.6,3.1,4.7,6.3,7.8,9.4,10.9,12.5,14.1,15.6,17.2,18.8,20.3,21.9,23.4,25,26.6,28.1,
                                  29.7,31.3,32.8,34.4,35.9,37.5,39.1,40.6,42.2,43.8,45.3,46.9,48.4,50,51.6,53.1,54.7,
                                  56.3,57.8,59.4,60.9,62.5,64.1,65.6,67.2,68.8,70.3,71.9,73.4,75,76.6,78.1,79.7,81.3,
                                  82.8,84.4,85.9,87.5,89.1,90.6,92.2,93.8,95.3,96.9,98.4,110);
  values: array [1..65] of Integer = (0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,
                                      112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,
                                      196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255);
  recs: GWM;
begin

  for i:=1 to 65 do
   begin
      recs[i].value := values[i];
      recs[i].perc := percs[i];
   end;
   result := recs;
end;

function initialize_dimming () : DIMM;
var
  i: integer;
  percs: array [1..17] of Real = (0,6.3,12.5,18.8,25,31.3,37.5,43.8,50,56.3,62.5,68.8,75,81.3,87.5,93.8,110);
  values: array [1..17] of Integer =  (0,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,255);
  recs: DIMM;
begin

  for i:=1 to 17 do
   begin
      recs[i].value := values[i];
      recs[i].perc := percs[i];
   end;
   result := recs;
end;

function initialize_freq (): FREQ;
var
  i: integer;
  freqs: array [0..256] of Real = (24,12,8,6,4.8,4,3.4286,3,2.6667,2.4,2.1818,2,1.8462,1.7143,1.6,1.5,1.4118,1.3333,1.2632,1.2,1.1429,1.0909,1.0435,1,
                 0.96,0.9231,0.8889,0.8571,0.8276,0.8,0.7742,0.75,0.7273,0.7059,0.6857,0.6667,0.6486,0.6316,0.6154,0.6,0.5854,0.5714,0.5581,0.5455,0.5333,
                 0.5217,0.5106,0.5,0.4898,0.48,0.4706,0.4615,0.4528,0.4444,0.4364,0.4286,0.4211,0.4138,0.4068,0.4,0.3934,0.3871,0.381,0.375,0.3692,0.3636,
                 0.3582,0.3529,0.3478,0.3429,0.338,0.3333,0.3288,0.3243,0.32,0.3158,0.3117,0.3077,0.3038,0.3,0.2963,0.2927,0.2892,0.2857,0.2824,0.2791,
                 0.2759,0.2727,0.2697,0.2667,0.2637,0.2609,0.2581,0.2553,0.2526,0.25,0.2474,0.2449,0.2424,0.24,0.2376,0.2353,0.233,0.2308,0.2286,0.2264,
                 0.2243,0.2222,0.2202,0.2182,0.2162,0.2143,0.2124,0.2105,0.2087,0.2069,0.2051,0.2034,0.2017,0.2,0.1983,0.1967,0.1951,0.1935,0.192,0.1905,
                 0.189,0.1875,0.186,0.1846,0.1832,0.1818,0.1805,0.1791,0.1778,0.1765,0.1752,0.1739,0.1727,0.1714,0.1702,0.169,0.1678,0.1667,0.1655,0.1644,
                 0.1633,0.1622,0.1611,0.16,0.1589,0.1579,0.1569,0.1558,0.1548,0.1538,0.1529,0.1519,0.1509,0.15,0.1491,0.1481,0.1472,0.1463,0.1455,0.1446,
                 0.1437,0.1429,0.142,0.1412,0.1404,0.1395,0.1387,0.1379,0.1371,0.1364,0.1356,0.1348,0.1341,0.1333,0.1326,0.1319,0.1311,0.1304,0.1297,0.129,
                 0.1283,0.1277,0.127,0.1263,0.1257,0.125,0.1244,0.1237,0.1231,0.1224,0.1218,0.1212,0.1206,0.12,0.1194,0.1188,0.1182,0.1176,0.1171,0.1165,
                 0.1159,0.1154,0.1148,0.1143,0.1137,0.1132,0.1127,0.1121,0.1116,0.1111,0.1106,0.1101,0.1096,0.1091,0.1086,0.1081,0.1076,0.1071,0.1067,0.1062,
                 0.1057,0.1053,0.1048,0.1043,0.1039,0.1034,0.103,0.1026,0.1021,0.1017,0.1013,0.1008,0.1004,0.1,0.0996,0.0992,0.0988,0.0984,0.098,0.0976,
                 0.0972,0.0968,0.0964,0.096,0.0956,0.0952,0.0949,0.0945,0.0941,0.0938,0.01);
  times: array [0..256] of String[12] = ('42 ms','83 ms','125 ms','167 ms','208 ms','250 ms','292 ms','333 ms','375 ms','417 ms','458 ms','500 ms','542 ms','583 ms',
                 '625 ms','667 ms','708 ms','750 ms','792 ms','833 ms','875 ms','917 ms','958 ms','1 s','1.04 s','1.08 s','1.13 s','1.17 s','1.21 s','1.25 s','1.29 s',
                 '1.33 s','1.38 s','1.42 s','1.46 s','1.5 s','1.54 s','1.58 s','1.63 s','1.67 s','1.71 s','1.75 s','1.79 s','1.83 s','1.88 s','1.92 s','1.96 s','2 s',
                 '2.04 s','2.08 s','2.13 s','2.17 s','2.21 s','2.25 s','2.29 s','2.33 s','2.38 s','2.42 s','2.46 s','2.5 s','2.54 s','2.58 s','2.63 s','2.67 s','2.71 s',
                 '2.75 s','2.79 s','2.83 s','2.88 s','2.92 s','2.96 s','3 s','3.04 s','3.08 s','3.13 s','3.17 s','3.21 s','3.25 s','3.29 s','3.33 s','3.38 s','3.42 s',
                 '3.46 s','3.5 s','3.54 s','3.58 s','3.63 s','3.67 s','3.71 s','3.75 s','3.79 s','3.83 s','3.88 s','3.92 s','3.96 s','4 s','4.04 s','4.08 s','4.13 s',
                 '4.17 s','4.21 s','4.25 s','4.29 s','4.33 s','4.38 s','4.42 s','4.46 s','4.5 s','4.54 s','4.58 s','4.63 s','4.67 s','4.71 s','4.75 s','4.79 s','4.83 s',
                 '4.88 s','4.92 s','4.96 s','5 s','5.04 s','5.08 s','5.13 s','5.17 s','5.21 s','5.25 s','5.29 s','5.33 s','5.38 s','5.42 s','5.46 s','5.5 s','5.54 s',
                 '5.58 s','5.63 s','5.67 s','5.71 s','5.75 s','5.79 s','5.83 s','5.88 s','5.92 s','5.96 s','6 s','6.04 s','6.08 s','6.13 s','6.17 s','6.21 s','6.25 s',
                 '6.29 s','6.33 s','6.38 s','6.42 s','6.46 s','6.5 s','6.54 s','6.58 s','6.63 s','6.67 s','6.71 s','6.75 s','6.79 s','6.83 s','6.88 s','6.92 s','6.96 s',
                 '7 s','7.04 s','7.08 s','7.13 s','7.17 s','7.21 s','7.25 s','7.29 s','7.33 s','7.38 s','7.42 s','7.46 s','7.5 s','7.54 s','7.58 s','7.63 s','7.67 s',
                 '7.71 s','7.75 s','7.79 s','7.83 s','7.88 s','7.92 s','7.96 s','8 s','8.04 s','8.08 s','8.13 s','8.17 s','8.21 s','8.25 s','8.29 s','8.33 s','8.38 s',
                 '8.42 s','8.46 s','8.5 s','8.54 s','8.58 s','8.63 s','8.67 s','8.71 s','8.75 s','8.79 s','8.83 s','8.88 s','8.92 s','8.96 s','9 s','9.04 s','9.08 s',
                 '9.13 s','9.17 s','9.21 s','9.25 s','9.29 s','9.33 s','9.38 s','9.42 s','9.46 s','9.5 s','9.54 s','9.58 s','9.63 s','9.67 s','9.71 s','9.75 s','9.79 s',
                 '9.83 s','9.88 s','9.92 s','9.96 s','10 s','10.04 s','10.08 s','10.13 s','10.17 s','10.21 s','10.25 s','10.29 s','10.33 s','10.38 s','10.42 s','10.46 s',
                 '10.5 s','10.54 s','10.58 s','10.63 s','10.67 s','X');
  recs: FREQ;
begin

  for i:=0 to 256 do
   begin
      recs[i].freq := freqs[i];
      recs[i].time := times[i];
   end;
   result := recs;
end;

end.
